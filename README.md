# 整理番号管理アプリケーション
## 概要
  - お店が混んでる際に整理番号を管理するアプリケーション

## 開発環境
  - nuxt.js (typescript)
  - vite
  - tailwind css
  - sass
  - supabase
  - pnpm
  - deploye
    - vercel

## 画面構成
  - アプリケーション紹介ページ
  - 管理者モード
  - QRcode表示モード
  - 顧客モード（QRcodeを読み取ると表示される画面）

## 機能
  - 管理者モード
    - 顧客入店
    - 顧客呼出
    - 顧客キャンセル
    - 入店済み顧客の退室
  - 顧客モード
    - 待ちキャンセル

## TODO
  - 管理者モード
    - 入店済みリスト
      - [x] リスト取得
      - [x] 退室処理
      - [x] リアルタイムに監視して追加されたら取得する方にする（5秒ごとに取得より無駄な通信が増えそう）
      - [x] 人数も表示する
    - 順番待ちリスト
      - [x] 顧客の入店処理
      - [x] 顧客キャンセル
      - [x] リアルタイムに監視して追加されたら取得する方にする（5秒ごとに取得より無駄な通信が増えそう）
      - [x] 顧客人数表示
      - [x] 顧客呼び出し
    - メニュー登録モード
      - [ ] 待っているお客さんがメニュー閲覧できるようにメニュー登録
  - 顧客モード
    - [x] 整理番号発券
    - [x] 待ちキャンセル
    - [x] qrコードを読み取って、人数だけを入力してform送信する
    - [x] お待ちの人数取得をリアルタイムに監視して追加されたら取得する方にする
    - [x] 最近の入店リスト取得をリアルタイムに監視して追加されたら取得する方にする
    - [ ] メニュー閲覧メニューを設けて、待っている間メニュー見れるようにする
  - [x] loading コンポーネント
  - login
    - [x] login
    - [x] register
  - security
    - [x] ログイン時にパスワードを平文で送信している。(networdタブではそう見えるけど、httpsなので、パケットが暗号化されるため、問題なし)
    - 顧客人数入力欄に顧客から入力が可能となっているため、よくない。入力できないようにするか、またはjsコードなどが実行できないようにserverでガードを立てるか
  - [x] 全体的にデザイン修正
  - [ ] RLS policy
  - [ ] sass導入
    - [ ] postcss、autoprefixerについて調べる
  - [ ] vite ssrを使って「アプリケーション紹介ページ」　/　「dashboard」を分ける
    - アプリケーション紹介ページ（ssr + csr）
      - [x] qr読み取りアプリの紹介（ssr）
      - [x] 会員登録（csr）
      - [x] ログイン（csr）
      - [x] ログアウト（csr）
      - [x] 問い合わせ（ログイン状態ではないため、email + 問い合わせ内容を入力する）（csr）
    - dashboard（csr）
      - [x] 上で作った機能（管理者モード、qrモードなど）
      - [x] ログアウト
      - [x] 問い合わせ（すでにログインされてる状態なので、問い合わせ内容だけ入力する）

## deploye
  - [x] vercelにdeploye
  - [ ] domain変更

## THINKING
  - [ ] entered_at & exited_atなどのカラムにjstに保存すべき？utcに保存すべき？

## サービス公開（予定、変わるかも）
  - wordpressでアプリを紹介するページを作成してお客さんから申し込みメールを受け取る
    - 上記サイトに今回のアプリケーションを載せ、後にお店でqrcodeで注文できるアプリケーションも載せる
      - そのアプリの機能
        - メニュー一覧（お客側で設定画面で自在に設定できるように）
        - おすすめメニュー紹介
        - などなど
  - メールを受け取ったらそのメール先にログイン情報を渡して、情報を修正してもらって使ってもらう